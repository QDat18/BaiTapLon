<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C·ª≠a H√†ng Anh Em R·ªçt - Trang Ch·ªß</title>
    
    <!-- CSS Links -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.2/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css"> 
    <link rel="stylesheet" href="css/banner.css">
    <link rel="stylesheet" href="css/flashsale.css">
    <link rel="stylesheet" href="css/main_css.css">

    <style>

        .loading-placeholder {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            font-size: 24px;
            color: #999;
        }

    </style>
</head>

<body>
    <!-- hieu ung load trang -->
    <!-- <div class="andro_preloader">
        <div class="spinner">
            <div class="dot1"></div>
            <div class="dot2"></div>
        </div>
    </div> -->

    <!-- Navbar will be loaded here -->
    <div id="navbar-placeholder"></div>
    <main>
        <!--Banner-->
        <section class="banner-section" style="margin-top: 140px;">
            <div class="container">
              <div id="bannerCarousel" class="carousel slide" data-ride="carousel">
                <!-- Timer indicator -->
                <div class="carousel-timer" id="carousel-timer"></div>
                
                <!-- Indicators will be generated dynamically -->
                <ul class="carousel-indicators" id="carousel-indicators"></ul>
                
                <!-- The slideshow will be generated dynamically -->
                <div class="carousel-inner" id="carousel-inner"></div>
                
                <!-- Left and right controls -->
                <a class="carousel-control-prev" href="#bannerCarousel" data-slide="prev">
                  <span class="carousel-control-prev-icon"></span>
                </a>
                <a class="carousel-control-next" href="#bannerCarousel" data-slide="next">
                  <span class="carousel-control-next-icon"></span>
                </a>
              </div>
            </div>
          </section>
        <!--Flash sale-->

        <section class="flash-sale">
            <div class="flash-sale-header">
                <img src="assets/banner/icon-fs.png" alt="Flash Sale" style="height: 40px;" />
                <span class="flash-sale-online">ONLINE ONLY - GI·∫¢M ƒê·∫æN 40%</span>
                <span class="flash-sale-countdown"><span id="countdown">00:00:00</span></span>
                <span class="flash-sale-time">S·∫Øp di·ªÖn ra 21:00 - 23:59</span>
            </div>
            <div class="flash-sale-products row" id="flashSaleProducts">
                <!-- S·∫£n ph·∫©m s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã ·ªü ƒë√¢y -->
            </div>
            <div class="text-center mt-4">
                <a href="javascript:void(0);" id="loadMore" class="more-products">Xem th√™m s·∫£n ph·∫©m &gt;</a>
            </div>
        </section>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Thi·∫øt l·∫≠p countdown
                function updateCountdown() {
                    const now = new Date();
                    const today = new Date();
                    today.setHours(21, 0, 0, 0); // Th·ªùi gian b·∫Øt ƒë·∫ßu l√† 21:00
                    
                    let timeLeft;
                    if (now.getHours() >= 21 || now.getHours() < 0) {
                        // N·∫øu ƒë√£ qua 21:00, ƒë·∫øm ng∆∞·ª£c ƒë·∫øn ng√†y mai
                        today.setDate(today.getDate() + 1);
                    }
                    
                    timeLeft = today - now;
                    
                    // T√≠nh gi·ªù, ph√∫t, gi√¢y
                    const hours = Math.floor(timeLeft / (1000 * 60 * 60));
                    const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                    
                    // Format ƒë·ªÉ lu√¥n hi·ªÉn th·ªã 2 ch·ªØ s·ªë
                    const formattedHours = String(hours).padStart(2, '0');
                    const formattedMinutes = String(minutes).padStart(2, '0');
                    const formattedSeconds = String(seconds).padStart(2, '0');
                    
                    document.getElementById('countdown').textContent = 
                        `${formattedHours}:${formattedMinutes}:${formattedSeconds}`;
                }
                
                // C·∫≠p nh·∫≠t ƒë·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c m·ªói gi√¢y
                updateCountdown();
                setInterval(updateCountdown, 1000);
                
                // T·∫£i v√† hi·ªÉn th·ªã s·∫£n ph·∫©m
                fetch('data/flashsale.json')
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Network response was not ok: ' + response.status);
                        }
                        return response.json();
                    })
                    .then(data => {
                        const productsContainer = document.getElementById('flashSaleProducts');
                        const products = data.products; // L·∫•y danh s√°ch s·∫£n ph·∫©m t·ª´ JSON
                        const loadMoreButton = document.getElementById('loadMore');
            
                        const itemsPerPage = 8; // S·ªë l∆∞·ª£ng s·∫£n ph·∫©m m·ªói l·∫ßn hi·ªÉn th·ªã
                        let displayedProducts = 0; // Bi·∫øn ƒë·∫øm s·ªë s·∫£n ph·∫©m ƒë√£ hi·ªÉn th·ªã
            
                        // H√†m ƒë·ªÉ hi·ªÉn th·ªã s·∫£n ph·∫©m
                        function displayProducts(startIndex, endIndex) {
                            // L·∫∑p qua c√°c s·∫£n ph·∫©m v√† th√™m v√†o container
                            for (let i = startIndex; i < endIndex && i < products.length; i++) {
                                const product = products[i];
                                const productCard = document.createElement('div');
                                productCard.classList.add('col-lg-3', 'col-md-4', 'col-sm-6', 'mb-4'); // C·∫£i thi·ªán responsive
                                
                                // Chuy·ªÉn ƒë·ªïi ph·∫ßn trƒÉm gi·∫£m gi√° n·∫øu c√≥
                                const discountText = product.discount ? 
                                    `<span class="discount-badge">${product.discount}</span>` : '';
                                
                                // Stock status
                                const stockStatus = parseInt(product.stock) > 0 ? 
                                    `<p class="stock-status in-stock">C√≤n ${product.stock} s·∫£n ph·∫©m</p>` : 
                                    '<p class="stock-status out-of-stock">H·∫øt h√†ng</p>';
            
                                // Th√™m HTML v√†o card s·∫£n ph·∫©m v·ªõi thi·∫øt k·∫ø c·∫£i ti·∫øn
                                productCard.innerHTML = `
                                    <div class="card product-card">
                                        <div class="product-image-container">
                                            <img src="${product.image}" class="card-img-top" alt="${product.name}">
                                            ${discountText}
                                        </div>
                                        <div class="card-body">
                                            <h5 class="card-title">${product.name}</h5>
                                            <div class="price-container">
                                                <span class="old-price">${product.old_price}</span>
                                                <span class="current-price">${product.price}</span>
                                            </div>
                                            ${stockStatus}
                                            <a href="product_detail.html?id=${product.id}" class="btn btn-primary view-detail">Xem Chi Ti·∫øt</a>
                                        </div>
                                    </div>
                                `;
                                // Th√™m s·∫£n ph·∫©m v√†o container
                                productsContainer.appendChild(productCard);
                            }
                            
                            // Ki·ªÉm tra v√† c·∫≠p nh·∫≠t tr·∫°ng th√°i n√∫t "Xem th√™m"
                            if (displayedProducts >= products.length) {
                                loadMoreButton.style.display = 'none';
                            } else {
                                loadMoreButton.style.display = 'inline-block';
                            }
                        }
            
                        // Hi·ªÉn th·ªã ban ƒë·∫ßu 8 s·∫£n ph·∫©m (2 h√†ng)
                        displayProducts(displayedProducts, itemsPerPage);
                        displayedProducts = itemsPerPage;
            
                        // X·ª≠ l√Ω s·ª± ki·ªán "Xem th√™m s·∫£n ph·∫©m"
                        loadMoreButton.addEventListener('click', () => {
                            const nextIndex = displayedProducts;
                            displayedProducts += itemsPerPage; // Hi·ªÉn th·ªã th√™m 8 s·∫£n ph·∫©m n·ªØa
                            displayProducts(nextIndex, displayedProducts);
                        });
                    })
                    .catch(error => {
                        console.error('Error fetching flash sale products:', error);
                        document.getElementById('flashSaleProducts').innerHTML = 
                            '<div class="col-12 text-center"><p class="error-message">Kh√¥ng th·ªÉ t·∫£i s·∫£n ph·∫©m. Vui l√≤ng th·ª≠ l·∫°i sau.</p></div>';
                    });
            });
            </script>
            
         <!-- Product Categories -->
        <section class="categories-section">
            <h2 class="section-title"><i class="fas fa-list"></i> Danh M·ª•c S·∫£n Ph·∫©m</h2>
            <div class="category-grid" id="category-container">
                <div class="category-card" id="category1">
                    <a href="iphone.html"><img src="assets/banner/category1.jpg" alt="Category 1"></a>
                    <h3>Iphone</h3>
                </div>
                <div class="category-card" id="category2">
                    <a href="ipad.html"><img src="assets/banner/category2.jpg" alt="Category 2"></a>
                    <h3>Ipad</h3>
                </div>
                <div class="category-card" id="category3">
                    <a href="macbook.html"><img src="assets/banner/category3.jpg" alt="Category 3"></a>
                    <h3>Macbook</h3>
                </div>
                <div class="category-card" id="category4">
                    <a href="tainghe_loa.html"><img src="assets/banner/category4.jpg" alt="Category 4"></a>
                    <h3>Tai nghe, Loa</h3>
                </div>
                <div class="category-card" id="category5">
                    <a href="phukien.html"><img src="assets/banner/category3.jpg" alt="Category 5"></a>
                    <h3>Ph·ª• Ki·ªán</h3>
                </div>
                <div class="category-card" id="category6">
                    <a href="Watch"><img src="assets/banner/category4.jpg" alt="Category 6"></a>
                    <h3>Watch</h3>
                </div>
            </div>
        </section>

        <!-- Featured Products -->
        <section class="products-section">
            <div class="section-header">
                <h2 class="section-title"><i class="fas fa-bolt"></i> S·∫£n Ph·∫©m N·ªïi B·∫≠t</h2>
                <a href="product_detail.html" class="view-all">Xem t·∫•t c·∫£ <i class="fas fa-chevron-right"></i></a>
            </div>
            
            <div class="slider-container">
                <div class="slider-track" id="slider-track">
                    <!-- Product Card 1 -->
                    <div class="product-card">
                        <div class="product-badge">M·ªõi</div>
                        <div class="product-thumbnail">
                            <img src="/api/placeholder/300/300" alt="S·∫£n ph·∫©m 1">
                            <div class="product-actions">
                                <button class="action-btn add-wishlist"><i class="far fa-heart"></i></button>
                                <button class="action-btn quick-view"><i class="far fa-eye"></i></button>
                                <button class="action-btn add-cart"><i class="fas fa-shopping-cart"></i></button>
                            </div>
                        </div>
                        <div class="product-info">
                            <h3 class="product-title"><a href="product_detail.html">Laptop Asus VivoBook</a></h3>
                            <div class="product-price">
                                <span class="current-price">15.990.000‚Ç´</span>
                                <span class="old-price">17.990.000‚Ç´</span>
                            </div>
                            <div class="product-rating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                                <span class="rating-count">(45)</span>
                            </div>
                        </div>
                    </div>
    
                    <!-- Product Card 2 -->
                    <div class="product-card">
                        <div class="product-badge sale">-20%</div>
                        <div class="product-thumbnail">
                            <img src="/api/placeholder/300/300" alt="S·∫£n ph·∫©m 2">
                            <div class="product-actions">
                                <button class="action-btn add-wishlist"><i class="far fa-heart"></i></button>
                                <button class="action-btn quick-view"><i class="far fa-eye"></i></button>
                                <button class="action-btn add-cart"><i class="fas fa-shopping-cart"></i></button>
                            </div>
                        </div>
                        <div class="product-info">
                            <h3 class="product-title"><a href="product_detail.html">iPhone 15 Pro Max</a></h3>
                            <div class="product-price">
                                <span class="current-price">28.990.000‚Ç´</span>
                                <span class="old-price">32.990.000‚Ç´</span>
                            </div>
                            <div class="product-rating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                                <span class="rating-count">(112)</span>
                            </div>
                        </div>
                    </div>
    
                    <!-- Product Card 3 -->
                    <div class="product-card">
                        <div class="product-thumbnail">
                            <img src="/api/placeholder/300/300" alt="S·∫£n ph·∫©m 3">
                            <div class="product-actions">
                                <button class="action-btn add-wishlist"><i class="far fa-heart"></i></button>
                                <button class="action-btn quick-view"><i class="far fa-eye"></i></button>
                                <button class="action-btn add-cart"><i class="fas fa-shopping-cart"></i></button>
                            </div>
                        </div>
                        <div class="product-info">
                            <h3 class="product-title"><a href="product_detail.html">Tai nghe Sony WH-1000XM5</a></h3>
                            <div class="product-price">
                                <span class="current-price">8.490.000‚Ç´</span>
                            </div>
                            <div class="product-rating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <span class="rating-count">(78)</span>
                            </div>
                        </div>
                    </div>
    
                    <!-- Product Card 4 -->
                    <div class="product-card">
                        <div class="product-badge hot">Hot</div>
                        <div class="product-thumbnail">
                            <img src="/api/placeholder/300/300" alt="S·∫£n ph·∫©m 4">
                            <div class="product-actions">
                                <button class="action-btn add-wishlist"><i class="far fa-heart"></i></button>
                                <button class="action-btn quick-view"><i class="far fa-eye"></i></button>
                                <button class="action-btn add-cart"><i class="fas fa-shopping-cart"></i></button>
                            </div>
                        </div>
                        <div class="product-info">
                            <h3 class="product-title"><a href="product_detail.html">Samsung Galaxy S25 Ultra</a></h3>
                            <div class="product-price">
                                <span class="current-price">27.490.000‚Ç´</span>
                                <span class="old-price">29.990.000‚Ç´</span>
                            </div>
                            <div class="product-rating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                                <span class="rating-count">(56)</span>
                            </div>
                        </div>
                    </div>
    
                    <!-- Product Card 5 -->
                    <div class="product-card">
                        <div class="product-thumbnail">
                            <img src="/api/placeholder/300/300" alt="S·∫£n ph·∫©m 5">
                            <div class="product-actions">
                                <button class="action-btn add-wishlist"><i class="far fa-heart"></i></button>
                                <button class="action-btn quick-view"><i class="far fa-eye"></i></button>
                                <button class="action-btn add-cart"><i class="fas fa-shopping-cart"></i></button>
                            </div>
                        </div>
                        <div class="product-info">
                            <h3 class="product-title"><a href="product_detail.html">iPad Air 2025</a></h3>
                            <div class="product-price">
                                <span class="current-price">16.990.000‚Ç´</span>
                            </div>
                            <div class="product-rating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                                <span class="rating-count">(34)</span>
                            </div>
                        </div>
                    </div>
    
                    <!-- Product Card 6 -->
                    <div class="product-card">
                        <div class="product-badge sale">-15%</div>
                        <div class="product-thumbnail">
                            <img src="/api/placeholder/300/300" alt="S·∫£n ph·∫©m 6">
                            <div class="product-actions">
                                <button class="action-btn add-wishlist"><i class="far fa-heart"></i></button>
                                <button class="action-btn quick-view"><i class="far fa-eye"></i></button>
                                <button class="action-btn add-cart"><i class="fas fa-shopping-cart"></i></button>
                            </div>
                        </div>
                        <div class="product-info">
                            <h3 class="product-title"><a href="product_detail.html">M√°y ·∫£nh Sony Alpha A7 IV</a></h3>
                            <div class="product-price">
                                <span class="current-price">48.990.000‚Ç´</span>
                                <span class="old-price">52.990.000‚Ç´</span>
                            </div>
                            <div class="product-rating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <span class="rating-count">(23)</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Slider Controls -->
                <div class="slider-control slider-prev" id="slider-prev">
                    <i class="fas fa-chevron-left"></i>
                </div>
                <div class="slider-control slider-next" id="slider-next">
                    <i class="fas fa-chevron-right"></i>
                </div>
            </div>
            
            <!-- Slider Dots -->
            <div class="slider-dots" id="slider-dots">
                <!-- Dots will be added by JavaScript -->
            </div>

        </section>
        <!-- Promotion Section -->
        <section class="promotion-section">
            <div class="section-header">
                <h2 class="section-title"><i class="fas fa-gift"></i> Khuy·∫øn M√£i</h2>
                <a href="promotion.html" class="view-all">Xem t·∫•t c·∫£ <i class="fas fa-chevron-right"></i></a>
            </div>
            <div class="promotion-grid" id="promotion-container">
                <!-- Promotion cards will be inserted here -->
            </div>
        </section>

        <!-- News Section -->
        <section class="news-section">
            <div class="section-header">
                <h2 class="section-title"><i class="fas fa-newspaper"></i> Tin T·ª©c</h2>
                <a href="news.html" class="view-all">Xem t·∫•t c·∫£ <i class="fas fa-chevron-right"></i></a>
            </div>
            <div class="news-grid" id="news-container">
                <!-- News cards will be inserted here -->
            </div>
        </section> 
    </main>
    <div class="container mt-3">
        <h2>Media Object</h2>
        <p>Create a media object with the .media and .media-body classes:</p>
        <div class="media border p-3">
          <img src="img_avatar3.png" alt="John Doe" class="mr-3 mt-3 rounded-circle" style="width:60px;">
          <div class="media-body">
            <h4>John Doe <small><i>Posted on February 19, 2016</i></small></h4>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>      
          </div>
        </div>
      </div>

    <!-- Footer will be loaded here -->
    <div id="footer-placeholder"></div>
    <div class="chatbot-container">
        <button id="chatbotToggle">üí¨</button>
        <div id="chatbotPopup" class="chatbot-popup hidden">
            <div class="chatbot-header">
                <span>AI Chatbot</span>
                <button id="closePopup">‚úñ</button>
            </div>
            <div class="chatbot-messages" id="chatbotMessages">
                <div class="message bot">Ch√†o b·∫°n! B·∫°n c·∫ßn g√¨?</div>
            </div>
            <div class="chatbot-input">
                <input type="text" id="userInput" placeholder="Nh·∫≠p c√¢u h·ªèi...">
                <button id="sendBtn">G·ª≠i</button>
            </div>
        </div>
    </div>
    <!-- Your Scripts -->
    <script src="scripts/loadbanner.js"></script>
    <script src="scripts/loadcontent.js"></script>
    <script src="scripts/cart.js"></script>
    <script src="scripts/news.js"></script>
    <script src="scripts/promotion.js"></script>
    <script src="scripts/index.js"></script>
</body>
</html>